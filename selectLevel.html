<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Select Level</title>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v4.2.0/dist/aframe-extras.min.js"></script> <!--Extra--->
    <script src="https://cdn.rawgit.com/zcanter/aframe-gradient-sky/master/dist/gradientsky.min.js"></script> <!--Weather--->
    <script src="https://rawgit.com/rdub80/aframe-gui/master/dist/aframe-gui.min.js"></script> <!--GUI--->
    <script src="https://rawgit.com/atomicguy/aframe-fence-component/master/dist/aframe-fence-component.min.js"></script>
    <script src="js/aframe-tooltip-component.js"></script>
    <script src="js/camera-position.js"></script>
    <script src="js/ground.js"></script>
    <script src="js/link-controls.js"></script>
    <script src="shaders/skyGradient.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <!-- All images assets -->
        <img id="sky" src="images/environment/sky.png">
        <img id="road" src="images/environment/road.jpg">
        <img id="sideroad" src="images/environment/sideroad.jpg">
        <img id="grass" src="images/environment/grass.jpg">
        <img id="cpavement" src="images/environment/cycling_pavement.jpg">
        <img id="walkway" src="images/environment/walkway.jpg">
        <img id="segway" src="images/menu/segway.png">
        <img id="bicycle" src="images/menu/bicycle.png">
        <img id="barrier" src="images/environment/barrier.png">
        <img id="hdb" src="images/environment/hdb.png">
        <img id="hdbg" src="images/environment/hdbg.png">
        <img id="park" src="images/environment/park.png">

        <img id="levels" src="images/menu/levels.png">
      </a-assets>

      <!-- Envrionments -->

      <!-- Sky -->
        <a-sky src="#sky"></a-sky>

        <!-- Barrier -->
        <a-box repeat="3 1" src="#barrier" position="0 1 10" rotation="0 0 0" width="15" height="1.5"></a-box>

        <!-- Roads -->
        <a-plane repeat="1 10" src="#road" position="0 0 -4" rotation="-90 0 0" width="10" height="96" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 10" src="#road" position="50 0 -57" rotation="-90 -90 0" width="10" height="230" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 10" src="#road" position="159.1 0 -4" rotation="-90 0 0" width="10" height="96" color="#7BC8A4" shadow></a-plane>

        <!-- Side Road -->
        <a-plane repeat="1 50" src="#sideroad" position="5.2 0 -4" rotation="-90 0 0" width="0.6" height="95" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 50" src="#sideroad" position="-5.2 0 -4" rotation="-90 0 0" width="0.6" height="96" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 50" src="#sideroad" position="55 0 -51.8" rotation="-90 90 0" width="0.6" height="190" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 50" src="#sideroad" position="55 0 -62.2" rotation="-90 90 0" width="0.6" height="190" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 50" src="#sideroad" position="153.8 0 48" rotation="-90 0 0" width="0.6" height="200" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 50" src="#sideroad" position="164.2 0 48" rotation="-90 0 0" width="0.6" height="200" color="#7BC8A4" shadow></a-plane>

        <!-- Grass -->
        <a-plane repeat="1 100" src="#grass" position="7 0 -4" rotation="-90 0 0" width="3" height="95" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#grass" position="-7 0 -4" rotation="-90 0 0" width="3" height="96" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#grass" position="152 0 -4" rotation="-90 0 0" width="3" height="95" color="#7BC8A4" shadow></a-plane>

        <!-- Pavement -->
        <a-plane repeat="1 100" src="#cpavement" position="11 0 -4" rotation="-90 0 0" width="5" height="85" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#cpavement" position="-11 0 -4" rotation="-90 0 0" width="5" height="96" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#cpavement" position="79.5 0 -49" rotation="-90 90 0" width="5" height="142" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#cpavement" position="148 0 13" rotation="-90 0 0" width="5" height="120" color="#7BC8A4" shadow></a-plane>

        <!-- Walkway -->
        <a-plane repeat="1 100" src="#walkway" position="16 0 -4" rotation="-90 0 0" width="5" height="85" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#walkway" position="-16 0 -4" rotation="-90 0 0" width="5" height="96" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#walkway" position="79 0 -44" rotation="-90 90 0" width="5" height="123" color="#7BC8A4" shadow></a-plane>
        <a-plane repeat="1 100" src="#walkway" position="143 0 13.5" rotation="-90 0 0" width="5" height="120" color="#7BC8A4" shadow></a-plane>

        <!-- Building -->
        <a-box repeat= "3 3" src="#hdb" position="19 30 10" rotation="0 90 0" width="100" height="60"></a-box>
        <a-box repeat= "3 3" src="#hdb" position="-19 30 -4" rotation="0 90 0" width="120" height="60"></a-box>
        <a-box repeat= "3 3" src="#hdb" position="78.5 30 -41" rotation="0 0 0" width="120" height="60"></a-box>
        <a-box repeat= "3 3" src="#hdb" position="140 30 19" rotation="0 90 0" width="120" height="60"></a-box>
        <a-box repeat= "5 1" src="#park" position="165.06 5 19" rotation="0 90 0" width="200" height="20" transparent="true"></a-box>

        <!-- Finish line -->
        <a-box position="145 15 10" rotation="0 0 0" width="40" height="10" color="#FFDA03"></a-box>
        <a-cone position="145 0 10" rotation="0 90 0" width="100" height="40" color="#FFDA03"></a-cone>
        <a-cone position="162 0 10" rotation="0 90 0" width="100" height="40" color="#FFDA03"></a-cone>

        <!-- Traffic Light -->
        <a-cylinder position="10 0 -50" rotation="0 90 0" width="10" height="15" color="#CCD4E2" radius="0.5">
            <a-box position="0 10 0" rotation="0 90 0" width="3" height="7" color="#CCD4E2">
                <a-circle id="red" position="0 2 -1" rotation="0 180 0" width="3" height="7" color="#ff1d00" visible="false"></a-circle>
                <a-circle id="yellow" position="0 -0.2 -1" rotation="0 180 0" width="3" height="7" color="#ffb200" visible="false"></a-circle>
                <a-circle id="green" position="0 -2.5 -1" rotation="0 180 0" width="3" height="7" color="#13e500" visible="false"></a-circle>
            </a-box>
        </a-cylinder>

        <a-cylinder position="-10 0 -50" rotation="0 90 0" width="10" height="20" color="#ccd4e2" radius="0.5">
            <a-box position="0 10 0" rotation="0 90 0" width="3" height="7" color="#CCD4E2">
                <a-circle id="red" position="0 2 -1" rotation="0 180 0" width="3" height="7" color="#ff1d00" visible="false"></a-circle>
                <a-circle id="yellow" position="0 -0.2 -1" rotation="0 180 0" width="3" height="7" color="#ffb200" visible="false"></a-circle>
                <a-circle id="green" position="0 -2.5 -1" rotation="0 180 0" width="3" height="7" color="#13e500" visible="false"></a-circle>
            </a-box>
        </a-cylinder>


        <!-- Background -->
      <a-box repeat= "10 1" src="#hdbg" position="5 20 -80" rotation="0 0 0" width="1000" height="40" transparent="true"></a-box>
      <a-plane repeat="1 10" src="#road" position="0 0 -4" rotation="-90 0 0" width="10" height="100" color="#7BC8A4" shadow></a-plane>
      <a-plane repeat="1 10" src="#road" position="0 0 -59" rotation="-90 -90 0" width="10" height="100" color="#7BC8A4" shadow></a-plane>

      <a-link id="precheckLink" position="-5 1.5 -4" image="#levels"></a-link>
      <a-link id="parkingLink" position="-2.5 1.5 -4" image="#levels"></a-link>
      <a-link id="rideonroadLink" position="0 1.5 -4" image="#levels"></a-link>
      <a-link href="#" position="5 1.5 -4" image="#levels"></a-link>
      <a-link href="#" position="2.5 1.5 -4" image="#levels"></a-link>
      
        <!-- Camera + cursor. -->
        <a-entity camera position="-1 1.6 0.5" look-controls wasd-controls="acceleration: 500" id="camera">
          <a-entity cursor="fuse: true; fuseTimeout: 1000"
                    position="0 0 -1"
                    geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
                    material="color: black; shader: flat">
            <a-animation begin="click" easing="ease-in" attribute="scale"
                         fill="backwards" from="0.1 0.1 0.1" to="1 1 1"></a-animation>
            <a-animation begin="cursor-fusing" easing="ease-in" attribute="scale"
                         fill="forwards" from="1 1 1" to="0.1 0.1 0.1"></a-animation>
          </a-entity>
        </a-entity>
    </a-scene>

  </body>
</html>

<script type="text/javascript">
    function getUrlVars() {
        var vars = {};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars.playertype;
    }

    var currentPlayerType = getUrlVars();
    
    document.getElementById('precheckLink').setAttribute('href','precheck.html?playertype=' + currentPlayerType);
    document.getElementById('parkingLink').setAttribute('href','parking.html?playertype=' + currentPlayerType);
    document.getElementById('rideonroadLink').setAttribute('href','rideonroad.html?playertype=' + currentPlayerType);


</script>
